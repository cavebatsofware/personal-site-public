# Personal Site Environment Configuration
# Copy this file to .env and fill in your values

#
# Application Configuration
#

# Note: Access codes are now managed through the admin panel database
# The ACCESS_CODES environment variable is no longer used

# Optional: Port override (default: 3000)
PORT=3000

#
# Database Configuration
#

# PostgreSQL Connection Details
# For local development with docker-compose, use:
DATABASE_URL=postgresql://personal_site_user:dev_password_change_in_production@localhost:5432/personal_site

# For production, use your hosted database URL:
# DATABASE_URL=postgresql://username:password@your-db-host:5432/personal_site

# Docker Compose Database Settings (local development only)
POSTGRES_DB=personal_site
POSTGRES_USER=personal_site_user
POSTGRES_PASSWORD=dev_password_change_in_production
POSTGRES_PORT=5432

# Database Host/Port for wait scripts
DATABASE_HOST=localhost
DATABASE_PORT=5432

# Test Database (separate test database)
TEST_DATABASE_URL=postgresql://personal_site_user:dev_password_change_in_production@localhost:5432/personal_site_test

# Database Migration Control
# Set to "true" to run migrations: MIGRATE_DB=true cargo run -- migrate
MIGRATE_DB=false

#
# Security Configuration
#

# Rate Limiting - max requests per minute before blocking IP
RATE_LIMIT_PER_MINUTE=30

# How long to block IPs that exceed rate limit (minutes)
BLOCK_DURATION_MINUTES=15

# Access Logging
# Enable/disable access logging to database
ENABLE_ACCESS_LOGGING=true

# Log successful attempts (for friend tracking)
LOG_SUCCESSFUL_ATTEMPTS=true

# Access log retention period (days) - logs older than this will be deleted
# Cleanup runs every 5 minutes
ACCESS_LOG_RETENTION_DAYS=30

#
# Optional: pgAdmin Configuration (database management UI)
#

# pgAdmin is optional and starts with: make db-admin
PGADMIN_EMAIL=admin@personal-site.local
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

#
# AWS Configuration
#

# AWS region (default: us-east-2)
AWS_REGION=us-east-2

# S3 bucket for resume content (index.html and Resume.pdf per access code)
# Files are stored at: s3://{bucket_name}/{code}/index.html
S3_BUCKET_NAME=your-resume-bucket

# Site domain (used for email validation and display)
SITE_DOMAIN=yourdomain.com

# Site URL (used for email verification links and landing page)
SITE_URL=https://yoursite.yourdomain.com

# SES email configuration for admin verification emails
AWS_SES_FROM_EMAIL=noreply@yourdomain.com

# AWS ECR Configuration (for deployment)
ECR_REGISTRY_URL=your-account.dkr.ecr.us-east-2.amazonaws.com
ECR_REPO_NAME=your-personal-site-repo
ECR_REGION=us-east-2
